# DRF

## Для начала работы с проектом необходимо:
1. Создать и активировать виртуальное окружение 
2. Установить зависимости из requirements.txt : "pip install -r requirements.txt"
3. Создать базу данных
4. Создать файл .env на основе .env_exmpl с вашими данными почты, базы данных
5. Выполнить миграции: "python manage.py makemigrations, python manage.py migrate"
6. Запустить проект


## Рекомендации

[//]: # (- Для корректной работы сайта, необходимо создать суперпользователя, и изменить домен в админке &#40;пример: 'http://127.0.0.1:8000/'&#41;)
- Создать суперпользователя можно командой: 'python manage.py csu'
- Создать обычного пользователя можно командой: 'python manage.py cu'
- Для загрузки данных для теста 'python manage.py add_data' (загрузка в бд:юзеров,курсов,уроков,платежей) 

#### Для Postman:

- фильтр:
- /payment/list/?payment_type=transfer
- /payment/list/?course=
- /payment/list/?lesson=
- сорт - /payment/list/?r&ordering=date_of_payment/


## Описание задач

### 24.1 Вьюсеты и дженерики
1. Задание 1
Создайте новый Django-проект, подключите DRF и внесите все необходимые настройки.

2. Задание 2
Создайте следующие модели:

#### Пользователь:
- все поля от обычного пользователя, но авторизацию заменить на email;
- телефон;
- город;
- аватарка.
####  Курс:
- название,
- превью (картинка),
- описание.
#### Урок:
- название,
- описание,
- превью (картинка),
- ссылка на видео.

3. Задание 3
Опишите CRUD для моделей курса и урока, но при этом для курса сделайте через ViewSets, а для урока — через Generic-классы.
Для работы контроллеров опишите простейшие сериализаторы.

4. Дополнительное задание
Реализуйте эндпоинт для редактирования профиля любого пользователя на основе более привлекательного подхода для личного использования: Viewset или Generic.
 


### 24.2 Сериализаторы и фильтры
1. Задание 1
Для модели курса добавьте в сериализатор поле вывода количества уроков.

2. Задание 2
Добавьте новую модель «Платежи» со следующими полями:

#### пользователь,
#### дата оплаты,
#### оплаченный курс или урок,
#### сумма оплаты,
#### способ оплаты: наличные или перевод на счет.
- Запишите в эту модель данные через инструмент фикстур или кастомную команду.

3. Задание 3
   - Для сериализатора модели курса реализуйте поле вывода уроков.

4. Задание 4
- Настройте фильтрацию для эндпоинтов вывода списка платежей с возможностями:

- менять порядок сортировки по дате оплаты,
- фильтровать по курсу или уроку,
- фильтровать по способу оплаты.


### 25.1 Права доступа в DRF

1. Задание 1
- Настройте в проекте использование JWT-авторизации и закройте каждый эндпоинт авторизацией.

2. Задание 2
- Заведите группу модераторов и опишите для нее права работы с любыми уроками или курсами, но без возможности их удалять и создавать новые. Заложите функционал такой проверки в контроллеры.

3. Задание 3
- Опишите права доступа для объектов таким образом, чтобы пользователи, которые не входят в группу модераторов, могли видеть и редактировать только свои курсы и уроки.